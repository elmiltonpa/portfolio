---
import { cn } from "../../lib/utils";
import Button from "../ui/Button.astro";
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";

import type { ImageMetadata } from "astro";

interface Props {
    title: string;
    description: string;
    tags?: string[];
    github?: string;
    link?: string;
    featured?: boolean;
    image?: ImageMetadata;
}

const { title, description, tags = [], github, link, image } = Astro.props;
---

<article
    class={cn(
        "group relative flex flex-col bg-secondary/30 rounded-3xl border border-white/5 overflow-hidden transition-all duration-500",
        "hover:border-primary/30 hover:bg-secondary/50 hover:-translate-y-1 shadow-2xl",
    )}
>
    {
        image && (
            <div class="relative w-full aspect-video overflow-hidden">
                <div class="absolute inset-0 bg-linear-to-t from-background/80 via-transparent to-transparent z-10 opacity-60" />
                <Image
                    src={image}
                    alt={title}
                    width={800}
                    height={450}
                    format="webp"
                    class="w-full h-full object-cover object-top transition-transform duration-700 group-hover:scale-105"
                />

                <div class="absolute inset-0 z-20 flex items-center justify-center gap-4 opacity-0 group-hover:opacity-100 transition-opacity duration-300 backdrop-blur-xs bg-background/20">
                    {github && (
                        <a
                            href={github}
                            target="_blank"
                            rel="noopener noreferrer"
                            class="p-3 rounded-full bg-background/80 text-foreground hover:bg-primary hover:text-white transition-all transform translate-y-4 group-hover:translate-y-0 duration-300 shadow-xl"
                            title="Ver CÃ³digo"
                        >
                            <Icon name="lucide:github" class="w-6 h-6" />
                        </a>
                    )}
                    {link && (
                        <a
                            href={link}
                            target="_blank"
                            rel="noopener noreferrer"
                            class="p-3 rounded-full bg-background/80 text-foreground hover:bg-primary hover:text-white transition-all transform translate-y-4 group-hover:translate-y-0 duration-300 delay-75 shadow-xl"
                            title="Ver Demo"
                        >
                            <Icon name="lucide:external-link" class="w-6 h-6" />
                        </a>
                    )}
                </div>
            </div>
        )
    }

    <div class="flex flex-col grow p-6 md:p-8">
        <div class="flex items-center gap-3 mb-3">
            <h3
                class="text-xl font-bold text-foreground group-hover:text-primary transition-colors"
            >
                {title}
            </h3>
            <div
                class="h-px grow bg-white/5 group-hover:bg-primary/20 transition-colors"
            >
            </div>
        </div>

        <p
            class="text-muted-foreground text-sm md:text-base mb-6 line-clamp-3 leading-relaxed"
        >
            {description}
        </p>

        <div class="flex flex-wrap gap-2 mt-auto pt-4">
            {
                tags.map((tech) => (
                    <span class="text-xs font-mono font-semibold tracking-wider uppercase text-primary bg-primary/10 px-3 py-1.5 rounded-lg border border-primary/25 hover:bg-primary/15 hover:border-primary/40 hover:scale-105 transition-all duration-300 cursor-default">
                        {tech}
                    </span>
                ))
            }
        </div>
    </div>
</article>
