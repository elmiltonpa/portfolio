---
import { cn } from "../../lib/utils";
import { Icon } from "astro-icon/components";

interface Props {
    title: string;
    description: string;
    tags?: string[];
    github?: string;
    link?: string;
    featured?: boolean;
    image?: string;
}

const {
    title,
    description,
    tags = [],
    github,
    link,
    featured = false,
    image,
} = Astro.props;
---

<article
    class={cn(
        "group relative p-6 rounded-lg border border-border bg-card",
        "hover:border-primary/50 transition-all duration-300 card-glow flex flex-col",
    )}
>
    {
        image && (
            <div class="relative w-full aspect-video mb-4 overflow-hidden rounded-md border border-border">
                <img
                    src={image}
                    alt={title}
                    class="absolute inset-0 w-full h-full object-cover object-top transition-transform duration-500 group-hover:scale-105"
                />
            </div>
        )
    }

    <div class="relative z-10 flex flex-col grow">
        <div class="flex items-start justify-between mb-4">
            <h3
                class="font-mono text-lg font-semibold text-foreground group-hover:text-primary transition-colors"
            >
                {title}
            </h3>

            <div class="flex gap-3">
                {
                    github && (
                        <a
                            href={github}
                            target="_blank"
                            rel="noopener noreferrer"
                            class="text-muted-foreground hover:text-primary transition-all hover:scale-110"
                            aria-label="Ver repositorio"
                        >
                            <Icon name="lucide:github" class="size-5" />
                        </a>
                    )
                }
                {
                    link && (
                        <a
                            href={link}
                            target="_blank"
                            rel="noopener noreferrer"
                            class="text-muted-foreground hover:text-primary transition-all hover:scale-110"
                            aria-label="Ver demo"
                        >
                            <Icon name="lucide:external-link" class="size-5" />
                        </a>
                    )
                }
            </div>
        </div>

        <p class="text-muted-foreground text-sm mb-4 leading-relaxed">
            {description}
        </p>

        <div class="flex flex-wrap gap-2 mt-auto">
            {
                tags.map((tech) => (
                    <span class="font-mono text-xs text-primary/80 px-2 py-1 bg-primary/10 rounded border border-primary/20">
                        {tech}
                    </span>
                ))
            }
        </div>
    </div>
</article>

<style>
    .card-glow:hover {
        box-shadow: 0 0 20px -5px rgba(var(--primary-rgb), 0.1);
    }
</style>
