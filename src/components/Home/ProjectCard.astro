---
import { cn } from "../../lib/utils";
import Button from "../ui/Button.astro";
import { Image } from "astro:assets";

import type { ImageMetadata } from "astro";

interface Props {
    title: string;
    description: string;
    tags?: string[];
    github?: string;
    link?: string;
    featured?: boolean;
    image?: ImageMetadata;
}

const { title, description, tags = [], github, link, image } = Astro.props;
---

<article
    class={cn(
        "group relative p-6 rounded-2xl border border-white/5 flex flex-col transition-all duration-500 card-glow shadow-2xl",
        "hover:border-primary/50",
    )}
    style="background-color: #222228; --primary-rgb: 128, 90, 213;"
>
    {
        image && (
            <div class="relative w-full aspect-video mb-4 overflow-hidden rounded-md border border-border">
                <Image
                    src={image}
                    alt={title}
                    width={800}
                    height={450}
                    format="webp"
                    class="absolute inset-0 w-full h-full object-cover object-top transition-transform duration-500 group-hover:scale-105"
                />
            </div>
        )
    }

    <div class="relative z-10 flex flex-col grow">
        <div class="flex items-start justify-between mb-2">
            <h3
                class="font-mono text-lg font-semibold text-foreground group-hover:text-primary transition-colors"
            >
                {title}
            </h3>
        </div>

        <p class="text-muted-foreground text-sm mb-6 leading-relaxed">
            {description}
        </p>

        <div class="flex flex-wrap gap-2 mb-8">
            {
                tags.map((tech) => (
                    <span class="font-mono text-sm font-medium text-foreground/80 bg-white/5 px-3 py-1 rounded-full border border-white/10 hover:border-primary/40 hover:text-foreground transition-all duration-300">
                        {tech}
                    </span>
                ))
            }
        </div>

        <div class="grid grid-cols-2 gap-3 mt-auto">
            {
                github && (
                    <Button
                        href={github}
                        target="_blank"
                        rel="noopener noreferrer"
                        variant="outline"
                        size="sm"
                        icon="lucide:github"
                        class={cn(
                            "font-mono text-xs py-2 h-auto",
                            !link && "col-span-2",
                        )}
                    >
                        CÃ³digo
                    </Button>
                )
            }
            {
                link && (
                    <Button
                        href={link}
                        target="_blank"
                        rel="noopener noreferrer"
                        variant="default"
                        size="sm"
                        icon="lucide:external-link"
                        class={cn(
                            "font-mono text-xs py-2 h-auto",
                            !github && "col-span-2",
                        )}
                    >
                        Demo
                    </Button>
                )
            }
        </div>
    </div>
</article>

<style>
    .card-glow:hover {
        box-shadow: 0 0 20px -5px rgba(var(--primary-rgb), 0.1);
    }
</style>
